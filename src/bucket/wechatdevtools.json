{
    "homepage": "https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html",
    "description": "The official devtool to develop and debug WeChat Mini Programs",
    "version": "2.01.2510260",
    "license": "Freeware",
    "architecture": {
        "64bit": {
            "url": "https://servicewechat.com/wxa-dev-logic/download_redirect?type=x64&from=mpwiki&download_version=2012510260&version_type=1#/installer.exe",
            "hash": "62981f7c5b3b4bc61641832a555c494326db6c95c193d9e1e0f1a266d99969d6"
        },
        "32bit": {
            "url": "https://servicewechat.com/wxa-dev-logic/download_redirect?type=ia32&from=mpwiki&download_version=2012510260&version_type=1#/installer.exe",
            "hash": "17f04128750f671481eba21129216da23ad77601a9e41cca26984eae22e29ac3"
        }
    },
    "installer": {
        "script": [
            "Expand-7zipArchive \"$dir\\installer.exe\" \"$dir\\app\" -Removal",
            "@('$PLUGINSDIR', '卸载微信开发者工具.exe.nsis') | ForEach-Object {",
            "    Remove-Item \"$dir\\app\\$_\" -Recurse -Force",
            "}"
        ]
    },
    "shortcuts": [
        [
            "app\\微信开发者工具.exe",
            "微信开发者工具"
        ]
    ],
    "portableProfile": {
        "mappings": [
            {
                "label": "roaming",
                "source": "LocalAppData/微信开发者工具",
                "target": "$persist_dir/roaming",
                "strategy": "symlink",
                "ensureTarget": true
            }
        ],
        "options": {
            "log": true
        }
    },
    "checkver": {
        "script": [
            "$url = 'https://servicewechat.com/wxa-dev-logic/download_redirect?type=x64&from=mpwiki&version_type=1'",
            "$request = [System.Net.HttpWebRequest]::Create($url)",
            "$request.Method = 'HEAD'",
            "$request.AllowAutoRedirect = $false",
            "$response = $null",
            "try {",
            "    $response = $request.GetResponse()",
            "    Write-Output $response.Headers['Location']",
            "} finally {",
            "    if ($response) { $response.Close() }",
            "}"
        ],
        "regex": "wechat_devtools_([\\d.]+)_win32_"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://servicewechat.com/wxa-dev-logic/download_redirect?type=x64&from=mpwiki&download_version=$majorVersion$minorVersion$patchVersion$buildVersion&version_type=1#/installer.exe"
            },
            "32bit": {
                "url": "https://servicewechat.com/wxa-dev-logic/download_redirect?type=ia32&from=mpwiki&download_version=$majorVersion$minorVersion$patchVersion$buildVersion&version_type=1#/installer.exe"
            }
        }
    },
    "notes": "WeChat DevTool user data is stored under '%LocalAppData\\微信开发者工具' and is persisted via portableProfile mapping to '$persist_dir\\roaming'."
}
